<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="sai-experiment.js"></script>
    <script>
    $(function() {
        var audioCtx = new AudioContext();
        var instrument = {
            oscillators: [
                {
                    type: "sine",
                    gain: 1,
                },
                {
                    type: "sawtooth",
                    gain: 0,
                },
            ],
            attack: 0.1,
            sustain: 0.1,
            release: 0.3,
            gain: 1,
        };
        var t = new sai.Track(audioCtx, instrument);
        t.output.connect(audioCtx.destination);
        var play = function() {
            var x = audioCtx.currentTime;
            for (var i = 0; i < 20; i ++) {
                t.playNote(69, x);
                x += 1;
                t.playNote(71, x);
                x += 1;
                t.playNote(73, x);
                x += 1;
                t.playNote(69, x);
                x += 1;
            }
        };
        $("button.btna").click(play);
    });
    </script>
</head>
<body>
    <p><button class="btna">Play</button></p>
</body>

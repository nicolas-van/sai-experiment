<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="sai-experiment.js"></script>
    <script>
    $(function() {
        var audioCtx = new AudioContext();
        var instrument = {
            oscillators: [
                {
                    type: "sine",
                    gain: 1,
                    freqOsc: {
                        type: "sine",
                        amount: 255 * 100,
                        frequency: Math.pow(2, 8 - 8),
                    },
                },
            ],
            filters: [
                /*{
                    type: "bandpass",
                    frequency: 10000,
                    gain: 0,
                    q: 1000,
                },*/
            ],
            attack: 0.05,
            sustain: 0.2,
            release: 0.1,
            gain: 0.2,
            noise: 0,
            delay: 0,
            delayTime: 0.3,
            panAmount: 0,
            panFrequency: 2,
        };
        var t = new sai.Track(audioCtx, instrument);
        t.output.connect(audioCtx.destination);
        var song = {
            notes: [],
        };
        var x = 0;
        var step = 0.5;
        for (var i = 0; i < 1; i ++) {
            song.notes.push([x, 69]);
            x += step;
            song.notes.push([x, 71]);
            x += step;
            song.notes.push([x, 73]);
            x += step;
            song.notes.push([x, 69]);
            x += step;
        };
        song.duration = x;
        var tp = new sai.TrackPlayer(t, song);
        var play = function() {
            stop();
            tp.playTrack(true);
        };
        var stop = function() {
            tp.stop();
        };
        $("button.btna").click(play);
        $("button.btnb").click(stop);
    });
    </script>
</head>
<body>
    <p><button class="btna">Play</button></p>
    <p><button class="btnb">Stop</button></p>
</body>
